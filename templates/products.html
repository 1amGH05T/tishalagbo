{% extends 'base.html' %}

{% block title %}Shop - Nawa{% endblock %}

{% block content %}
<!-- Header -->
<div class="bg-brand-dark py-12">
    <div class="container mx-auto px-6">
        <h1 class="font-heading text-4xl font-bold text-white mb-2">Our Collection</h1>
        <p class="text-brand-accent/80">Explore our range of natural products.</p>
    </div>
</div>

<div class="bg-gray-50 py-12">
    <div class="container mx-auto px-6">
        <div class="flex flex-col lg:flex-row gap-8">

            <!-- Sidebar / Filters -->
            <aside class="w-full lg:w-1/4">
                <div class="bg-white rounded-xl shadow-sm p-6 sticky top-24">
                    <div class="mb-8">
                        <h3 class="font-heading text-xl font-bold text-brand-dark mb-4 pb-2 border-b border-gray-100">
                            Categories</h3>
                        <ul class="space-y-3">
                            <li>
                                <a href="{% url 'products' %}"
                                    class="flex items-center justify-between text-brand font-medium group">
                                    <span>All Products</span>
                                </a>
                            </li>
                            {% for cat in categories %}
                            <li>
                                <a href="#"
                                    class="flex items-center justify-between text-gray-600 hover:text-brand transition group">
                                    <span>{{ cat.name }}</span>
                                    <!-- Optional: if you pass category counts, you can show them -->
                                    <span class="text-gray-400 text-xs group-hover:text-brand transition">â†’</span>
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>

                    <div>
                        <h3 class="font-heading text-xl font-bold text-brand-dark mb-4 pb-2 border-b border-gray-100">
                            Filter</h3>
                        <p class="text-sm text-gray-500 mb-4">Price Range</p>
                        <div class="space-y-2">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" class="form-checkbox text-brand rounded focus:ring-brand-light">
                                <span class="text-gray-600 text-sm">Under $20</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" class="form-checkbox text-brand rounded focus:ring-brand-light">
                                <span class="text-gray-600 text-sm">$20 - $50</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" class="form-checkbox text-brand rounded focus:ring-brand-light">
                                <span class="text-gray-600 text-sm">Above $50</span>
                            </label>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Product Grid -->
            <main class="w-full lg:w-3/4">
                <!-- Toolbar -->
                <div class="flex flex-col sm:flex-row justify-between items-center mb-8 pb-4 border-b border-gray-200">
                    <p class="text-gray-500 text-sm mb-4 sm:mb-0">Showing <span class="font-bold text-brand-dark">{{
                            products|length }}</span> results</p>
                    <div class="flex items-center space-x-3">
                        <span class="text-sm text-gray-500">Sort by:</span>
                        <select
                            class="text-sm border-gray-300 rounded-md focus:ring-brand focus:border-brand bg-white py-1 pl-2 pr-8 shadow-sm">
                            <option>Newest</option>
                            <option>Price: Low to High</option>
                            <option>Price: High to Low</option>
                        </select>
                    </div>
                </div>

                {% if products %}
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {% for product in products %}
                    <div
                        class="bg-white rounded-2xl shadow-sm hover:shadow-xl transition duration-300 group flex flex-col h-full border border-gray-100">
                        <div class="relative overflow-hidden aspect-[4/5] rounded-t-2xl bg-gray-100">
                            {% if product.image %}
                            <img src="{{ product.image.url }}" alt="{{ product.title }}"
                                class="w-full h-full object-cover transition duration-700 group-hover:scale-105">
                            {% else %}
                            <div class="w-full h-full flex items-center justify-center bg-gray-200 text-gray-400">No
                                Image</div>
                            {% endif %}

                            <!-- Quick Action Overlay -->
                            <div
                                class="absolute inset-x-0 bottom-0 bg-white/90 backdrop-blur p-4 translate-y-full group-hover:translate-y-0 transition duration-300 flex justify-center border-t border-gray-100">
                                <a href="{% url 'detail' product.id %}"
                                    class="text-brand font-medium hover:text-brand-dark flex items-center gap-2">
                                    View Details <svg class="w-4 h-4" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                                    </svg>
                                </a>
                            </div>
                        </div>

                        <div class="p-6 flex-grow flex flex-col">
                            <div class="mb-2">
                                <span class="text-xs font-semibold tracking-wider text-brand-light uppercase">{{
                                    product.category.name }}</span>
                            </div>
                            <h3
                                class="font-heading text-xl font-bold text-gray-800 mb-2 group-hover:text-brand transition">
                                <a href="{% url 'detail' product.id %}">{{ product.title }}</a>
                            </h3>
                            <p class="text-gray-500 text-sm line-clamp-2 mb-4 flex-grow">{{ product.content|striptags }}
                            </p>

                            <div class="mt-auto pt-4 border-t border-gray-50 flex items-center justify-between">
                                <span class="text-lg font-bold text-brand-dark">$24.99 <span
                                        class="text-xs font-normal text-gray-400">/ estimated</span></span>
                                <button
                                    class="w-8 h-8 rounded-full bg-brand-accent/20 text-brand flex items-center justify-center hover:bg-brand hover:text-white transition">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z">
                                        </path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300">
                    <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4">
                        </path>
                    </svg>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">No Products Found</h3>
                    <p class="text-gray-500">Check back later for our new collection.</p>
                </div>
                {% endif %}
            </main>
        </div>
    </div>
</div>
{% endblock %}